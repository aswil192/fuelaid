<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="theme-color" content="#3f51b5">
	<link href="https://fonts.googleapis.com/css?family=Dosis:200,300,400,500,700" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Overpass:300,400,400i,600,700" rel="stylesheet">

    <link rel="stylesheet" href="/assets/css/open-iconic-bootstrap.min.css">
    <link rel="stylesheet" href="/assets/css/animate.css">
    
    <link rel="stylesheet" href="/assets/css/owl.carousel.min.css">
    <link rel="stylesheet" href="/assets/css/owl.theme.default.min.css">
    <link rel="stylesheet" href="/assets/css/magnific-popup.css">

    <link rel="stylesheet" href="/assets/css/aos.css">

    <link rel="stylesheet" href="/assets/css/ionicons.min.css">

    <link rel="stylesheet" href="/assets/css/bootstrap-datepicker.css">
    <link rel="stylesheet" href="/assets/css/jquery.timepicker.css">

    <link rel="stylesheet" href="/assets/css/font-awesome.min.css">
    
    <link rel="stylesheet" href="/assets/css/flaticon.css">
    <link rel="stylesheet" href="/assets/css/icomoon.css">
	<link rel="stylesheet" href="/assets/css/style.css">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" integrity="sha512-1ycn6IcaQQ40/MKBW2W4Rhis/DbILU74C1vSrLJxCq57o941Ym01SwNsOMqvEBFlcgUa6xLiPY/NS5R+E6ztJQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
	<link rel="stylesheet" href="/assets/css/sidebar.css">
	<link rel="icon" type="image/png" href="/assets/images/FUEL AID_logo.png">
	<!-- <link rel="stylesheet" href="/assets/css/sidebar.css"> -->
	<title> <%= typeof title != 'undefined' ? title : "FuelAid" %> </title>
</head>

<body>
	<%- include('../partials/header') %>
	<%- include('../partials/alerts') %>

<style>
   header{
		background-color: #403d3d!important;
	}
   header .navbar, .bg-dark, .navbar-dark, .navbar-light {
	background-color: #403d3d!important;
      background-image: none !important;
      box-shadow: none !important;
   }
   .logo-container img {
    height: 0.9em;
    width: auto;
}
   .rounded{
	background-color: #7d6148 !important;
   }
   .primary{
		background-color: #473016 !important;
   }
   </style>
<main>
	<%- include('../partials/mechanicSidebar') %>
	
	<div id="main-wrapper">
		<div class="bg-white shadow-sm p-3">
			<br>
			<span class="me-3" id="sidebar-toggler-btn"><i class="fas fa-bars"></i></span>
			<h5 class="m-0 color-theme d-inline-block">Dashboard</h5>
		</div>
		
		<!-- Mechanic Dashboard Content -->
<div class="container mt-4">

	<!-- Welcome Banner -->
	<div class="alert alert-primary rounded-3 shadow-sm">
	  <h4 class="mb-1">Welcome back, <%= mechanic.firstName %>!</h4>
	  <small class="text-muted">Let‚Äôs get to work. Your services make a difference.</small>
	</div>
  
	<!-- Quick Summary Cards -->
	
	  <!-- <div class="col-md-4">
		<div class="card text-white bg-info shadow-sm">
		  <div class="card-body">
			<h5 class="card-title"><i class="fas fa-road me-2"></i>Distance Travelled</h5>
			<p class="card-text fs-4">~0 km</p>
		  </div>
		</div>
	  </div> -->
	
	</div>
  
	<!-- Quote of the Day & Clock -->
	<div class="row mt-4">
	  <div class="col-md-8">
		<div class="card shadow-sm">
		  <div class="card-body">
			<blockquote class="blockquote mb-0">
			  <p>‚ÄúQuality is never an accident. It is always the result of intelligent effort.‚Äù</p>
			  <footer class="blockquote-footer mt-2">‚Äì John Ruskin</footer>
			</blockquote>
		  </div>
		</div>
	  </div>
	  <div class="col-md-4 text-end">
		<div class="card shadow-sm">
		  <div class="card-body">
			<h5>üïí <span id="clock" class="fw-bold"></span></h5>
			<p class="mb-0 text-muted" id="currentDate"></p>
		  </div>
		</div>
	  </div>
	</div>
  
  </div>
  
		
</main>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
	<script src="/assets/js/script.js"></script>
	<script src="/socket.io/socket.io.js"></script>
	<!-- <script>
	  const socket = io();
	
	  const mechanicId = "<%= mechanic._id %>";
	
	  function sendLocation() {
		if ('geolocation' in navigator) {
		  navigator.geolocation.getCurrentPosition((pos) => {
			const { latitude, longitude } = pos.coords;
	
			socket.emit('mechanicLocationUpdate', {
			  mechanicId,
			  lat: latitude,
			  lng: longitude
			});
		  });
		}
	  }
	
	  sendLocation(); // Initial location push
	  setInterval(sendLocation, 10000); // Update every 10 seconds
	</script> -->
	<script>
		function updateClock() {
		  const now = new Date();
		  const time = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
		  const date = now.toLocaleDateString(undefined, { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });
		  document.getElementById('clock').textContent = time;
		  document.getElementById('currentDate').textContent = date;
		}
	  
		updateClock(); // Initial call
		setInterval(updateClock, 1000); // Update every second
	  </script>
	  
	 <script>
		const socket = io();
		const mechanicId = "<%= mechanic._id %>";
		
		let simulatedLat = 28.628151; // Starting latitude
let simulatedLng = 77.367783; // Starting longitude

function simulateLocation() {
    // Simulate movement
    simulatedLat += 0.0001;
    simulatedLng += 0.0001;

    // Log the updated location
    console.log(`Simulated location: (${simulatedLat}, ${simulatedLng})`);

    // Emit the simulated location to the server
    socket.emit('mechanicLocationUpdate', {
        mechanicId,
        lat: simulatedLat,
        lng: simulatedLng
    });
}

// Start the simulation
setInterval(simulateLocation, 5000);

	  </script>
	  
</body>
</html>