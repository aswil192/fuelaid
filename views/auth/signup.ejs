<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="theme-color" content="#3f51b5">
	<link href="https://fonts.googleapis.com/css?family=Dosis:200,300,400,500,700" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Overpass:300,400,400i,600,700" rel="stylesheet">

    <link rel="stylesheet" href="/assets/css/open-iconic-bootstrap.min.css">
    <link rel="stylesheet" href="/assets/css/animate.css">

    <style>
        /* Smooth fade-in animation for signup form */
        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(40px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideInDown {
            from {
                opacity: 0;
                transform: translateY(-40px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Apply animations with smooth easing */
        .signup-header {
            animation: slideInDown 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        .signup-form {
            animation: slideInUp 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94) 0.2s both;
        }

        .form-group-item {
            animation: slideInUp 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        /* Stagger animation delays for each form field */
        .form-group-item:nth-child(1) { animation-delay: 0.3s; }
        .form-group-item:nth-child(2) { animation-delay: 0.35s; }
        .form-group-item:nth-child(3) { animation-delay: 0.4s; }
        .form-group-item:nth-child(4) { animation-delay: 0.45s; }
        .form-group-item:nth-child(5) { animation-delay: 0.5s; }
        .form-group-item:nth-child(6) { animation-delay: 0.55s; }
        .form-group-item:nth-child(7) { animation-delay: 0.6s; }
        .form-group-item:nth-child(8) { animation-delay: 0.65s; }
        .form-group-item:nth-child(9) { animation-delay: 0.7s; }
        .form-group-item:nth-child(10) { animation-delay: 0.75s; }
        .form-group-item:nth-child(11) { animation-delay: 0.8s; }

        .submit-btn {
            animation: slideInUp 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94) 0.85s both;
        }

        .login-link {
            animation: slideInUp 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94) 0.9s both;
        }

        /* Smooth hover effect on inputs */
        .form-control,
        .form-select {
            transition: all 0.3s ease;
            border-color: #ddd;
        }

        .form-control:focus,
        .form-select:focus {
            border-color: #e69500;
            box-shadow: 0 0 0 0.2rem rgba(230, 149, 0, 0.25);
            transform: translateY(-2px);
        }

        /* Button hover animation */
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
            transition: all 0.3s ease;
        }

        /* Smooth link hover */
        a {
            transition: color 0.3s ease;
        }

        .login-link a:hover {
            color: #e69500 !important;
        }
    </style>
    <link rel="stylesheet" href="/assets/css/animate.css">
    
    <link rel="stylesheet" href="/assets/css/owl.carousel.min.css">
    <link rel="stylesheet" href="/assets/css/owl.theme.default.min.css">
    <link rel="stylesheet" href="/assets/css/magnific-popup.css">

    <link rel="stylesheet" href="/assets/css/aos.css">

    <link rel="stylesheet" href="/assets/css/ionicons.min.css">

    <link rel="stylesheet" href="/assets/css/bootstrap-datepicker.css">
    <link rel="stylesheet" href="/assets/css/jquery.timepicker.css">

    <link rel="stylesheet" href="/assets/css/font-awesome.min.css">
    
    <link rel="stylesheet" href="/assets/css/flaticon.css">
    <link rel="stylesheet" href="/assets/css/icomoon.css">
    <link rel="stylesheet" href="/assets/css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" integrity="sha512-1ycn6IcaQQ40/MKBW2W4Rhis/DbILU74C1vSrLJxCq57o941Ym01SwNsOMqvEBFlcgUa6xLiPY/NS5R+E6ztJQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
	<!-- <link rel="stylesheet" href="/assets/css/style1.css"> -->
	<link rel="stylesheet" href="/assets/css/sidebar.css">
	<link rel="icon" type="image/png" href="/assets/images/FUEL AID_logo.png">
	<!-- <link rel="stylesheet" href="/assets/css/sidebar.css"> -->
	<title> <%= typeof title != 'undefined' ? title : "Samvedana" %> </title>
</head>

<body>
	<%- include('../partials/header') %>
	<%- include('../partials/alerts') %>
	<style>
        header {
            background-color: #403d3d!important;
        }
	.navbar, .bg-dark {
    background-color: #403d3d!important;
    background-image: none !important;
    box-shadow: none !important;
	}
.btn{
  background: #e69500;
      color: white;
      border: none;
      border-radius: 5px;
      width:100%;
}
.btn:hover {
      background: #f1c999;
    }
	.navbar-nav .nav-link {
    white-space: nowrap;
}
body {
  font-family: "Poppins", Arial, sans-serif;
  background: #F1C999;
  font-size: 16px;
  line-height: 1.8;
  font-weight: 400;
  color: #666666; }
  body.menu-show {
    overflow: hidden;
    position: fixed;
    height: 100%;
    width: 100%; }
    </style>

<div class="m-0 pt-4 w-100 bg-img-1" style="background-image: url('/assets/images/roadside-assistance-bg.svg'); background-size: cover; background-position: center; background-attachment: fixed; min-height: 100vh; position: relative;">
	<!-- Overlay for better form visibility -->
	<div style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: rgba(255, 255, 255, 0.85);"></div>
	
	<div style="position: relative; z-index: 10;">
		<div class="signup-header text-center mb-4" style="animation: slideInDown 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);">
			<h1 style="color: #333; font-weight: 600; font-size: 2.5rem;">Join Us Today</h1>
			<p style="color: #888; font-size: 1.1rem;">Create your account to get started</p>
		</div>
		<form action="/auth/signup" method="POST" class="signup-form w-50 bg-white p-5 m-auto" style="min-width: 320px; border-radius: 10px; box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);">
		<h3 class="text-center mb-4" style="color: #403d3d; font-weight: 600;">User Signup</h3>

		<% if(typeof errors != 'undefined') { %>
			<% errors.forEach(function(error) { %>
				<div class="alert alert-danger alert-dismissible fade show" role="alert">
					<%= error.msg %>
					<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
				</div>
			<% }); %>
		<% } %>
		
		<div class="mb-3 form-group-item">
			<label for="first-name" class="form-label" style="font-weight: 500; color: #333;">First name</label>
			<input type="text" name="firstName" class="form-control" id="first-name" placeholder="Enter first name.." value="<%= typeof firstName != 'undefined' ? firstName : '' %>" required autofocus>
		</div>
		
		<div class="mb-3 form-group-item">
			<label for="last-name" class="form-label" style="font-weight: 500; color: #333;">Last name</label>
			<input type="text" name="lastName" class="form-control" id="last-name" placeholder="Enter last name.." value="<%= typeof lastName != 'undefined' ? lastName : '' %>" required>
		</div>
		
		<div class="mb-3 form-group-item">
			<label for="email" class="form-label" style="font-weight: 500; color: #333;">Email address</label>
			<input type="email" name="email" class="form-control" id="email" placeholder="Enter email.." value="<%= typeof email != 'undefined' ? email : '' %>" required>
			<div class="form-text">We'll never share your email with anyone else.</div>
		</div>

		<!-- Driving License field - visible only for customers -->
		<div class="mb-3 form-group-item" id="dlField">
			<label for="dl" class="form-label" style="font-weight: 500; color: #333;">Driving License Number</label>
			<input type="text" name="dl" class="form-control" id="dl" placeholder="Enter Driving License Number.." value="<%= typeof dl != 'undefined' ? dl : '' %>">
		</div>


		<div class="mb-3 form-group-item">
			<label for="phone" class="form-label" style="font-weight: 500; color: #333;">Phone</label>
			<input type="text" name="phone" class="form-control" id="phone" placeholder="Enter phone number.." value="<%= typeof phone != 'undefined' ? phone : '' %>" required>
		</div>
		
		<div class="mb-3 form-group-item">
			<label for="password1" class="form-label" style="font-weight: 500; color: #333;">Password</label>
			<input type="password" name="password1" class="form-control" id="password1" placeholder="Enter password.." value="<%= typeof password1 != 'undefined' ? password1 : '' %>" required>
			<!-- Password strength indicator -->
			<div style="margin-top: 8px; display: none;" id="strengthIndicator">
				<div style="display: flex; align-items: center; gap: 8px;">
					<div style="flex: 1; height: 6px; background-color: #e0e0e0; border-radius: 3px; overflow: hidden;">
						<div id="strengthBar" style="height: 100%; width: 0%; transition: width 0.3s ease, background-color 0.3s ease; background-color: #dc3545;"></div>
					</div>
					<span id="strengthText" style="font-size: 12px; font-weight: 600; color: #dc3545; min-width: 60px;">Weak</span>
				</div>
			</div>
		</div>

		
		<div class="mb-3 form-group-item">
			<label for="password2" class="form-label" style="font-weight: 500; color: #333;">Confirm Password</label>
			<input type="password" name="password2" class="form-control" id="password2" placeholder="Re-enter password.." value="<%= typeof password2 != 'undefined' ? password2 : '' %>" required>
		</div>
		
		<!-- Signup as section moved to bottom -->
		<div class="mb-3 form-group-item">
			<label for="role" class="form-label" style="font-weight: 500; color: #333;">Signup as</label>
			<select class="form-select" name="role" id="role">
				<option value="customer">Customer</option>
				<option value="mechanic">Mechanic</option>
				<option value="fueldeliveryboy">Fuel Delivery Boy</option>
			</select>
		</div>
		
		
		<button type="submit" class="btn d-block m-auto mt-4 submit-btn" style="font-weight: 600; font-size: 1.1rem; padding: 12px;">Create Account</button>
		
		<div class="mt-4 login-link text-center">
			<span style="color: #666;">Already have an account?</span>
			<a href="/auth/login" style="color: #e69500; text-decoration: none; font-weight: 600;">Sign in here</a>
		</div>
		</form>
	</div>
</div>
<script>
	// Toggle driving license field visibility based on role selection
	const roleSelect = document.getElementById('role');
	const dlField = document.getElementById('dlField');
	const dlInput = document.getElementById('dl');

	function toggleDLField() {
		if (roleSelect.value === 'customer') {
			dlField.style.display = 'block';
			dlInput.required = true;
		} else {
			dlField.style.display = 'none';
			dlInput.required = false;
			dlInput.value = '';
		}
	}

	// Listen for role changes
	roleSelect.addEventListener('change', toggleDLField);

	// Initialize on page load
	toggleDLField();

	// Password strength analyzer
	const password1Input = document.getElementById('password1');
	const strengthIndicator = document.getElementById('strengthIndicator');
	const strengthBar = document.getElementById('strengthBar');
	const strengthText = document.getElementById('strengthText');

	function analyzePasswordStrength(password) {
		let strength = 0;
		let feedback = '';

		// Check password length
		if (password.length >= 8) strength += 1;
		if (password.length >= 12) strength += 1;
		if (password.length >= 16) strength += 1;

		// Check for uppercase letters
		if (/[A-Z]/.test(password)) strength += 1;

		// Check for lowercase letters
		if (/[a-z]/.test(password)) strength += 1;

		// Check for numbers
		if (/[0-9]/.test(password)) strength += 1;

		// Check for special characters
		if (/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(password)) strength += 1;

		// Determine strength level
		if (strength <= 2) {
			return { level: 'Weak', percentage: 25, color: '#dc3545' }; // Red
		} else if (strength <= 4) {
			return { level: 'Good', percentage: 60, color: '#ffc107' }; // Yellow
		} else {
			return { level: 'Strong', percentage: 100, color: '#28a745' }; // Green
		}
	}

	password1Input.addEventListener('input', function() {
		const password = this.value;

		if (password.length === 0) {
			strengthIndicator.style.display = 'none';
		} else {
			const result = analyzePasswordStrength(password);
			strengthIndicator.style.display = 'block';
			strengthBar.style.width = result.percentage + '%';
			strengthBar.style.backgroundColor = result.color;
			strengthText.textContent = result.level;
			strengthText.style.color = result.color;
		}
	});
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
	<script src="/assets/js/script.js"></script>
</body>
</html>